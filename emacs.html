<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2015-12-02 Wed 13:36 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>John's Emacs Config</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="John Del Rosario" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<style>.outline-3, .outline-4, .outline-5 { padding-left: 2em; };</style>
<style>#table-of-contents { float: right; border: 1px solid; overflow: auto; font-size: 14px; position: fixed; right: 0; top: 0; background: white; z-index: 999; max-height: 80%; }</style>
<style>#table-of-contents h2 { font-size: 14px; padding: 10px; }</style>
<style>#table-of-contents:hover #text-table-of-contents { display: block; }</style>
<style>#text-table-of-contents { display: none }</style>
<style>#text-table-of-contents ul { padding-left: 20px }</style>
<style>code { border: 1px solid lightgrey; background: #FFFFE9; padding: 2px}</style>
<style>pre.src { background: #FFFFE9 }</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">John's Emacs Config</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Introduction</a></li>
<li><a href="#orgheadline2">System paths and files</a></li>
<li><a href="#orgheadline3">Constants</a></li>
<li><a href="#orgheadline5">Package Archives and Management</a>
<ul>
<li><a href="#orgheadline4">MELPA</a></li>
</ul>
</li>
<li><a href="#orgheadline6">Utility Functions and Macros</a>
<ul>
<li><a href="#orgheadline7"><code>install-package</code></a></li>
<li><a href="#orgheadline8"><code>add-auto-mode</code></a></li>
<li><a href="#orgheadline9">Persistent scratch</a></li>
</ul>
</li>
<li><a href="#orgheadline13">OS Specific</a>
<ul>
<li><a href="#orgheadline10">OS X</a></li>
<li><a href="#orgheadline11"><span class="todo nilTODO">TODO</span> Linux</a></li>
<li><a href="#orgheadline12"><span class="todo nilTODO">TODO</span> Windows</a></li>
</ul>
</li>
<li><a href="#orgheadline14">Install Packages</a></li>
<li><a href="#orgheadline15">Configure</a>
<ul>
<li><a href="#orgheadline16">Misc</a></li>
<li><a href="#orgheadline17">Shell</a></li>
<li><a href="#orgheadline18">UI</a>
<ul>
<li><a href="#orgheadline19">Font</a></li>
<li><a href="#orgheadline20">Theme</a></li>
<li><a href="#orgheadline21">Mode line</a></li>
</ul>
</li>
<li><a href="#orgheadline22">Ag</a></li>
<li><a href="#orgheadline23">ido, <code>M-x</code></a></li>
<li><a href="#orgheadline24">Window and frame management</a></li>
<li><a href="#orgheadline25">Interactive searching</a></li>
<li><a href="#orgheadline27">Completion</a>
<ul>
<li><a href="#orgheadline26">company</a></li>
</ul>
</li>
<li><a href="#orgheadline28">Flycheck</a></li>
<li><a href="#orgheadline40">Language Specific</a>
<ul>
<li><a href="#orgheadline31">Python</a></li>
<li><a href="#orgheadline32">YAML</a></li>
<li><a href="#orgheadline33">HTML/CSS (<code>web-mode</code>)</a></li>
<li><a href="#orgheadline34">Markdown</a></li>
<li><a href="#orgheadline35">Javascript</a></li>
<li><a href="#orgheadline36">Lisp</a></li>
<li><a href="#orgheadline37">Clojure</a></li>
<li><a href="#orgheadline38">Elm</a></li>
<li><a href="#orgheadline39">Haskell</a></li>
</ul>
</li>
<li><a href="#orgheadline41">Code Folding (HideShow)</a></li>
<li><a href="#orgheadline42">Dired</a></li>
<li><a href="#orgheadline43">Org</a>
<ul>
<li><a href="#orgheadline44">Publishing</a></li>
<li><a href="#orgheadline45">Journal</a></li>
</ul>
</li>
<li><a href="#orgheadline46">Git</a>
<ul>
<li><a href="#orgheadline47">Magit</a></li>
</ul>
</li>
<li><a href="#orgheadline48">Projectile</a></li>
<li><a href="#orgheadline49">ERC</a>
<ul>
<li><a href="#orgheadline50">Modules</a></li>
</ul>
</li>
<li><a href="#orgheadline51">Mail</a></li>
<li><a href="#orgheadline52">Ledger</a></li>
<li><a href="#orgheadline53">Evil</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Introduction</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
See <code>init.el</code> on how Org loads and interprets this file for initializing Emacs.
</p>

<p>
The latest raw version of this file can be found at <a href="https://github.com/john2x/emacs.d">https://github.com/john2x/emacs.d</a>.
</p>

<p>
This file was last exported: 2015-12-02 13:36
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">System paths and files</h2>
<div class="outline-text-2" id="text-orgheadline2">
<p>
Tell Emacs where to put packages installed from Melpa, where custom themes
can be loaded and where customizations done with <code>customize</code> should be stored.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'load-path <span style="color: #CCCCB7;">(</span>expand-file-name <span style="color: #b85c57;">"lib"</span> <span style="color: #b85c57;">"~/.emacs.d/"</span><span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'custom-theme-load-path <span style="color: #CCCCB7;">(</span>expand-file-name <span style="color: #b85c57;">"themes"</span> <span style="color: #b85c57;">"~/.emacs.d/"</span><span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>setq custom-file <span style="color: #CCCCB7;">(</span>expand-file-name <span style="color: #b85c57;">"custom.el"</span> user-emacs-directory<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>file-exists-p custom-file<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>load custom-file<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">Constants</h2>
<div class="outline-text-2" id="text-orgheadline3">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defconst</span> <span style="color: #4fa8a8;">*is-a-mac*</span> <span style="color: #CCCCB7;">(</span>eq system-type 'darwin<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5">Package Archives and Management</h2>
<div class="outline-text-2" id="text-orgheadline5">
</div><div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">MELPA</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
Using bleeding edge? I, too, like to live dangerously.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">package</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'package-archives
  '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"melpa"</span> . <span style="color: #b85c57;">"https://melpa.org/packages/"</span><span style="color: #CCCCB7;">)</span> t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>package-initialize<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6">Utility Functions and Macros</h2>
<div class="outline-text-2" id="text-orgheadline6">
<p>
Define utility functions and macros used throughout this config file.
</p>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><code>install-package</code></h3>
<div class="outline-text-3" id="text-orgheadline7">
<p>
Define <code>install-package</code> for easier installing of
packages.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #40883f;">;; </span><span style="color: #40883f;">copied from github.com/purcell/emacs.d</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">install-package</span> <span style="color: #CCCCB7;">(</span>package <span style="color: #0287c8; font-weight: bold;">&amp;optional</span> min-version no-refresh<span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">"Install given PACKAGE, optionally requiring MIN-VERSION.</span>
<span style="color: #40883f;">If NO-REFRESH is non-nil, the available package lists will not be</span>
<span style="color: #40883f;">re-downloaded in order to locate PACKAGE."</span>
  <span style="color: #CCCCB7;">(</span>message <span style="color: #b85c57;">"%s"</span> package<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>package-installed-p package min-version<span style="color: #CCCCB7;">)</span>
      t
    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>or <span style="color: #CCCCB7;">(</span>assoc package package-archive-contents<span style="color: #CCCCB7;">)</span> no-refresh<span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span>package-install package<span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">progn</span>
        <span style="color: #CCCCB7;">(</span>package-refresh-contents<span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span>install-package package min-version t<span style="color: #CCCCB7;">)))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><code>add-auto-mode</code></h3>
<div class="outline-text-3" id="text-orgheadline8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">add-auto-mode</span> <span style="color: #CCCCB7;">(</span>mode <span style="color: #0287c8; font-weight: bold;">&amp;rest</span> patterns<span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">"Add entries to `</span><span style="color: #989848; font-weight: bold;">auto-mode-alist</span><span style="color: #40883f;">' to use `</span><span style="color: #989848; font-weight: bold;">MODE</span><span style="color: #40883f;">' for all given file `</span><span style="color: #989848; font-weight: bold;">PATTERNS</span><span style="color: #40883f;">'."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>pattern patterns<span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist <span style="color: #CCCCB7;">(</span>cons pattern mode<span style="color: #CCCCB7;">))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9">Persistent scratch</h3>
<div class="outline-text-3" id="text-orgheadline9">
<p>
Persist the <code>*scratch*</code> buffer every 5 minutes, so we don't lose any possibly important data if/when Emacs crashes.<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">save-persistent-scratch</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Write the contents of *scratch* to the file name</span>
<span style="color: #40883f;">`</span><span style="color: #989848; font-weight: bold;">persistent-scratch-file-name</span><span style="color: #40883f;">'."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-current-buffer</span> <span style="color: #CCCCB7;">(</span>get-buffer-create <span style="color: #b85c57;">"*scratch*"</span><span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>write-region <span style="color: #CCCCB7;">(</span>point-min<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>point-max<span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"~/.emacs-persistent-scratch"</span><span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">load-persistent-scratch</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Load the contents of `</span><span style="color: #989848; font-weight: bold;">persistent-scratch-file-name</span><span style="color: #40883f;">' into the</span>
<span style="color: #40883f;">  scratch buffer, clearing its contents first."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>file-exists-p <span style="color: #b85c57;">"~/.emacs-persistent-scratch"</span><span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-current-buffer</span> <span style="color: #CCCCB7;">(</span>get-buffer <span style="color: #b85c57;">"*scratch*"</span><span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span>delete-region <span style="color: #CCCCB7;">(</span>point-min<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>point-max<span style="color: #CCCCB7;">))</span>
        <span style="color: #CCCCB7;">(</span>insert-file-contents <span style="color: #b85c57;">"~/.emacs-persistent-scratch"</span><span style="color: #CCCCB7;">))))</span>

<span style="color: #CCCCB7;">(</span>push #'load-persistent-scratch after-init-hook<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>push #'save-persistent-scratch kill-emacs-hook<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>not <span style="color: #CCCCB7;">(</span>boundp 'save-persistent-scratch-timer<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>setq save-persistent-scratch-timer
          <span style="color: #CCCCB7;">(</span>run-with-idle-timer 300 t 'save-persistent-scratch<span style="color: #CCCCB7;">)))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13">OS Specific</h2>
<div class="outline-text-2" id="text-orgheadline13">
</div><div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10">OS X</h3>
<div class="outline-text-3" id="text-orgheadline10">
<p>
Conditionally set the following when on OS X (see <b>Constants</b>):
</p>
<ol class="org-ol">
<li>Reveal file in current buffer in Finder.</li>
<li>Use Command ⌘ for Meta and don't use Option ⌥.</li>
<li>Fix mouse wheel/trackpad scrolling to be less "jerky".</li>
</ol>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> *is-a-mac*
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">1.</span>
  <span style="color: #CCCCB7;">(</span>install-package 'reveal-in-finder<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">reveal-in-finder</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">2.</span>
  <span style="color: #CCCCB7;">(</span>setq mac-command-modifier 'meta<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>setq mac-option-modifier 'none<span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">3.</span>
  <span style="color: #CCCCB7;">(</span>setq mouse-wheel-scroll-amount '<span style="color: #CCCCB7;">(</span>1
                                    <span style="color: #CCCCB7;">((</span>shift<span style="color: #CCCCB7;">)</span> . 5<span style="color: #CCCCB7;">)</span>
                                    <span style="color: #CCCCB7;">((</span>control<span style="color: #CCCCB7;">)))))</span>
</pre>
</div>

<p>
The following adds packages installed by Homebrew to our load-path.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">((</span>default-directory <span style="color: #b85c57;">"/usr/local/share/emacs/site-lisp/"</span><span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>normal-top-level-add-subdirs-to-load-path<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="todo TODO">TODO</span> Linux</h3>
<div class="outline-text-3" id="text-orgheadline11">
<p>
Try using this config on an Ubuntu or ArchLinux VM.
</p>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="todo TODO">TODO</span> Windows</h3>
<div class="outline-text-3" id="text-orgheadline12">
<p>
Try using this config on a Windows (7+) VM.
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-2">
<h2 id="orgheadline14">Install Packages</h2>
<div class="outline-text-2" id="text-orgheadline14">
<p>
Install all packages here using <code>install-package</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defvar</span> <span style="color: #4fa8a8;">my-packages</span>
  '<span style="color: #CCCCB7;">(</span><span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Misc</span>
    exec-path-from-shell
    undo-tree
    bind-key
    nameframe
    avy
    link-hint

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Mode-line</span>
    diminish
    smart-mode-line

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">UI</span>
    indent-guide
    yascroll
    highlight-symbol
    smooth-scroll
    nlinum

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">ido, ~M-x~</span>
    flx-ido
    ido-ubiquitous
    smex
    idomenu
    ido-vertical-mode

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Window and frame management</span>
    buffer-move
    window-number
    fullframe

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Interactive Search</span>
    anzu

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Completion</span>
    company
    company-emoji

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Linting</span>
    flycheck

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Dired</span>
    dired+

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Ack &amp; Ag</span>
    ag

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Git</span>
    magit
    git-blame
    gitignore-mode
    gitconfig-mode
    git-messenger
    git-gutter

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Projectile</span>
    projectile
    flx
    project-explorer
    nameframe-projectile

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Perspective</span>
    perspective
    nameframe-perspective

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Evil (Vim)</span>
    evil
    evil-anzu
    evil-surround
    evil-leader
    evil-matchit
    evil-nerd-commenter
    evil-search-highlight-persist

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Ledger</span>
    ledger-mode
    flycheck-ledger

    <span style="color: #40883f;">;;;; </span><span style="color: #40883f;">Language specific</span>
    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Python</span>
    virtualenvwrapper
    anaconda-mode
    company-anaconda
    nose

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">YAML</span>
    yaml-mode

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">HTML, CSS</span>
    web-mode

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Markdown</span>
    markdown-mode

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Javascript</span>
    json-mode
    js2-mode

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Lisp</span>
    paredit
    rainbow-delimiters
    highlight-parentheses
    paren-face

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Clojure</span>
    cider

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Misc</span>
    haskell-mode
    ghc
    flycheck-haskell
    purescript-mode
    elm-mode
    mu4e-alert

    <span style="color: #40883f;">;;;;;; </span><span style="color: #40883f;">Org</span>
    htmlize
    org-journal<span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">"My packages!"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">loop over my-packages and install them</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">install-my-packages</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>mapc 'install-package my-packages<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>install-my-packages<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-2">
<h2 id="orgheadline15">Configure</h2>
<div class="outline-text-2" id="text-orgheadline15">
<p>
Now that everything is installed and ready, we can begin
configuring packages, modes, key bindings, etc.
</p>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16">Misc</h3>
<div class="outline-text-3" id="text-orgheadline16">
<p>
For a majority of programming modes, we want to indent immediately after a
newline.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'prog-mode-hook
          <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>local-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"RET"</span><span style="color: #CCCCB7;">)</span> 'newline-and-indent<span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
For a majority of programming languages, an underscore is part of a word or symbol.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>modify-syntax-entry  ?_ <span style="color: #b85c57;">"w"</span> <span style="color: #CCCCB7;">(</span>standard-syntax-table<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Set some generic variables.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default
 tab-width 4
 make-backup-files nil
 indent-tabs-mode nil
 show-trailing-whitespace t
 visible-bell nil<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
We don't want to have to type "yes" or "no" at prompts.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>fset 'yes-or-no-p 'y-or-n-p<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Remember where we were when we last visited a file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default save-place t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq save-place-file <span style="color: #b85c57;">"~/.emacs.d/tmp/saved-places"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Automatically creating missing parent directories when visiting a new file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-create-non-existent-directory</span> <span style="color: #CCCCB7;">()</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">((</span>parent-directory <span style="color: #CCCCB7;">(</span>file-name-directory buffer-file-name<span style="color: #CCCCB7;">)))</span>
        <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>and <span style="color: #CCCCB7;">(</span>not <span style="color: #CCCCB7;">(</span>file-exists-p parent-directory<span style="color: #CCCCB7;">))</span>
                   <span style="color: #CCCCB7;">(</span>y-or-n-p <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"Directory `</span><span style="color: #989848; font-weight: bold;">%s</span><span style="color: #b85c57;">' does not exist! Create it?"</span> parent-directory<span style="color: #CCCCB7;">)))</span>
          <span style="color: #CCCCB7;">(</span>make-directory parent-directory t<span style="color: #CCCCB7;">))))</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'find-file-not-found-functions #'my-create-non-existent-directory<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Configure smooth scrolling.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">smooth-scroll</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>smooth-scroll-mode 1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq smooth-scroll/vscroll-step-size 4<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
When visiting buffers with the same name, uniqify them instead of the default of
appending a number.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq uniquify-buffer-name-style 'forward
      uniquify-separator <span style="color: #b85c57;">" &#8226; "</span>
      uniquify-after-kill-buffer-p t
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">don't uniquify internal buffers (those that start with '*')</span>
      uniquify-ignore-buffers-re <span style="color: #b85c57;">"^\\*"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Bind undo/redo to sane bindings.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">undo-tree</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-z"</span><span style="color: #CCCCB7;">)</span> 'undo<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-Z"</span><span style="color: #CCCCB7;">)</span> 'undo-tree-redo<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">Shell</h3>
<div class="outline-text-3" id="text-orgheadline17">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #40883f;">;; </span><span style="color: #40883f;">make these environment variables available in Emacs</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'exec-path-from-shell
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>var '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"SSH_AUTH_SOCK"</span>
                 <span style="color: #b85c57;">"SSH_AGENT_PID"</span>
                 <span style="color: #b85c57;">"GPG_AGENT_INFO"</span>
                 <span style="color: #b85c57;">"LANG"</span>
                 <span style="color: #b85c57;">"LC_CTYPE"</span>
                 <span style="color: #b85c57;">"LEDGER_FILE"</span>
                 <span style="color: #b85c57;">"WORKON_HOME"</span><span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>add-to-list 'exec-path-from-shell-variables var<span style="color: #CCCCB7;">)))</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>memq window-system '<span style="color: #CCCCB7;">(</span>mac ns<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>exec-path-from-shell-initialize<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">UI</h3>
<div class="outline-text-3" id="text-orgheadline18">
<p>
Configure UI stuff like:
</p>
<ul class="org-ul">
<li>hide toolbars</li>
<li>hide GUI scrollbars, use in-buffer scrollbars instead with <code>yascroll</code></li>
<li>show indentation guide (useful for Python and HTML)</li>
</ul>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">yascroll</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">indent-guide</span><span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">don't show toolbar</span>
<span style="color: #CCCCB7;">(</span>tool-bar-mode -1<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">highlight matching parentheses</span>
<span style="color: #CCCCB7;">(</span>show-paren-mode 1<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">show line numbers (use nlinum-mode; linum-mode is slow)</span>
<span style="color: #CCCCB7;">(</span>global-nlinum-mode<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">we use yascroll for the scrollbar instead</span>
<span style="color: #CCCCB7;">(</span>scroll-bar-mode -1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-yascroll-bar-mode 1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq yascroll:delay-to-hide nil<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">show column number in mode-line</span>
<span style="color: #CCCCB7;">(</span>column-number-mode<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq inhibit-splash-screen t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq-default indicate-empty-lines t<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">enable indent-guide for the following modes only</span>
<span style="color: #CCCCB7;">(</span>setq indent-guide-recursive nil<span style="color: #CCCCB7;">)</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">(add-hook 'python-mode-hook 'indent-guide-mode)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'web-mode-hook 'indent-guide-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Enable <code>highlight-symbol</code> in select modes. Also patch how symbols are (not)
highlighted when holding down movement keys.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>hook '<span style="color: #CCCCB7;">(</span>prog-mode-hook html-mode-hook<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>add-hook hook 'highlight-symbol-mode<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>add-hook hook 'highlight-symbol-nav-mode<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>add-hook hook 'hs-minor-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'highlight-symbol
  <span style="color: #CCCCB7;">(</span>diminish 'highlight-symbol-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">http://emacs.stackexchange.com/questions/931</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">highlight-symbol-mode-post-command</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"After a command, change the temporary highlighting.</span>
<span style="color: #40883f;">Remove the temporary symbol highlighting and, unless a timeout is specified,</span>
<span style="color: #40883f;">create the new one."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>eq this-command 'highlight-symbol-jump<span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> highlight-symbol-on-navigation-p
        <span style="color: #CCCCB7;">(</span>highlight-symbol-temp-highlight<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>highlight-symbol-update-timer highlight-symbol-idle-delay<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">highlight-symbol-update-timer</span> <span style="color: #CCCCB7;">(</span>value<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> highlight-symbol-timer
    <span style="color: #CCCCB7;">(</span>cancel-timer highlight-symbol-timer<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>setq highlight-symbol-timer
        <span style="color: #CCCCB7;">(</span>run-with-timer value nil 'highlight-symbol-temp-highlight<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span>setq highlight-symbol-idle-delay .1<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-4">
<h4 id="orgheadline19">Font</h4>
<div class="outline-text-4" id="text-orgheadline19">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defvar</span> <span style="color: #4fa8a8;">Input-font</span> '<span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:family</span> <span style="color: #b85c57;">"Input"</span> <span style="color: #282828; font-weight: bold;">:size</span> 12<span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defvar</span> <span style="color: #4fa8a8;">PragmataPro-font</span> '<span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:family</span> <span style="color: #b85c57;">"Essential PragmataPro"</span> <span style="color: #282828; font-weight: bold;">:size</span> 12<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>set-frame-font <span style="color: #CCCCB7;">(</span>apply 'font-spec PragmataPro-font<span style="color: #CCCCB7;">)</span> nil t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> *is-a-mac*
  <span style="color: #CCCCB7;">(</span>set-fontset-font
     t 'symbol
     <span style="color: #CCCCB7;">(</span>font-spec <span style="color: #282828; font-weight: bold;">:family</span> <span style="color: #b85c57;">"Apple Color Emoji"</span><span style="color: #CCCCB7;">)</span> nil 'prepend<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Easily switch fonts.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-switch-font</span> <span style="color: #CCCCB7;">(</span>font<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>interactive <span style="color: #b85c57;">"sSwitch font (1. Input 2. PragmataPro): "</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">cond</span> <span style="color: #CCCCB7;">((</span>string= font <span style="color: #b85c57;">"1"</span><span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>set-frame-font <span style="color: #CCCCB7;">(</span>apply 'font-spec Input-font<span style="color: #CCCCB7;">)</span> nil t<span style="color: #CCCCB7;">))</span>
        <span style="color: #CCCCB7;">((</span>string= font <span style="color: #b85c57;">"2"</span><span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>set-frame-font <span style="color: #CCCCB7;">(</span>apply 'font-spec PragmataPro-font<span style="color: #CCCCB7;">)</span> nil t<span style="color: #CCCCB7;">))</span>
        <span style="color: #CCCCB7;">(</span>t <span style="color: #CCCCB7;">(</span>message <span style="color: #b85c57;">"Invalid option. Please choose 1 or 2."</span><span style="color: #CCCCB7;">))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20">Theme</h4>
<div class="outline-text-4" id="text-orgheadline20">
<p>
Theme of the month.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>load-theme 'plan9 t<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21">Mode line</h4>
<div class="outline-text-4" id="text-orgheadline21">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>which-function-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22">Ag</h3>
<div class="outline-text-3" id="text-orgheadline22">
<p>
Highlight search results in the ag buffer.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq ag-highlight-search t<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-3">
<h3 id="orgheadline23">ido, <code>M-x</code></h3>
<div class="outline-text-3" id="text-orgheadline23">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>ido-mode t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>ido-everywhere t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>flx-ido-mode t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq ido-enable-flex-matching t
      ido-use-filename-at-point nil
      ido-auto-merge-work-directories-length 0
<span style="color: #40883f;">;; </span><span style="color: #40883f;">Allow the same buffer to be open in different frames</span>
      ido-default-buffer-method 'selected-window<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Render ido candidates vertically.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>ido-vertical-mode t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq ido-vertical-define-keys 'C-n-and-C-p-only
      ido-vertical-show-count t<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Ignore dired buffers when using <code>ido-switch-buffer</code>, as we're only interested
in actual file buffers (and some internal buffers).
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">ido-ignore-dired-buffers</span> <span style="color: #CCCCB7;">(</span>name<span style="color: #CCCCB7;">)</span>
  <span style="color: #40883f;">"Ignore dired buffers"</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-current-buffer</span> name
        <span style="color: #CCCCB7;">(</span>derived-mode-p 'dired-mode<span style="color: #CCCCB7;">)))</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'ido-ignore-buffers 'ido-ignore-dired-buffers<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Use ido in all interactions with <code>M-x</code> (i.e. provides ido-completion when doing <code>M-x ledger-report</code>, etc.)
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>ido-ubiquitous-mode t<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Override <code>M-x</code> to use smex. Smex basically sorts commands by most-recently used.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-x"</span><span style="color: #CCCCB7;">)</span> 'smex<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-X"</span><span style="color: #CCCCB7;">)</span> 'smex-major-mode-commands<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24">Window and frame management</h3>
<div class="outline-text-3" id="text-orgheadline24">
<p>
Use <code>M-g [h|j|k|l]</code> to swap buffers between windows.
Also allow using numbers to switch window focus.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">buffer-move</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">window-number</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>fn '<span style="color: #CCCCB7;">(</span>buf-move-up buf-move-down buf-move-left buf-move-right<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">((</span>file <span style="color: #b85c57;">"buffer-move"</span><span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>autoload fn file <span style="color: #40883f;">"Swap buffers between windows"</span> t<span style="color: #CCCCB7;">)))</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g h"</span><span style="color: #CCCCB7;">)</span>       'buf-move-left<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g l"</span><span style="color: #CCCCB7;">)</span>       'buf-move-right<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g k"</span><span style="color: #CCCCB7;">)</span>       'buf-move-up<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g j"</span><span style="color: #CCCCB7;">)</span>       'buf-move-down<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>window-number-meta-mode 1<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-3">
<h3 id="orgheadline25">Interactive searching</h3>
<div class="outline-text-3" id="text-orgheadline25">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-anzu-mode t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>diminish 'anzu-mode<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>global-set-key [remap query-replace-regexp] 'anzu-query-replace-regexp<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key [remap query-replace] 'anzu-query-replace<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">Activate occur easily inside isearch</span>
<span style="color: #CCCCB7;">(</span>define-key isearch-mode-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-o"</span><span style="color: #CCCCB7;">)</span> 'isearch-occur<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-3">
<h3 id="orgheadline27">Completion</h3>
<div class="outline-text-3" id="text-orgheadline27">
</div><div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26">company</h4>
<div class="outline-text-4" id="text-orgheadline26">
<p>
Enable <code>company-mode</code> globally.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'after-init-hook #'global-company-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28">Flycheck</h3>
<div class="outline-text-3" id="text-orgheadline28">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq flycheck-check-syntax-automatically '<span style="color: #CCCCB7;">(</span>save idle-change mode-enabled<span style="color: #CCCCB7;">)</span>
      flycheck-idle-change-delay 0.8<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'after-init-hook #'global-flycheck-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline40" class="outline-3">
<h3 id="orgheadline40">Language Specific</h3>
<div class="outline-text-3" id="text-orgheadline40">
</div><div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31">Python</h4>
<div class="outline-text-4" id="text-orgheadline31">
</div><ul class="org-ul"><li><a id="orgheadline29"></a>Anaconda<br  /><div class="outline-text-5" id="text-orgheadline29">
<p>
Use Anaconda with <code>company</code> for code completion.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">company-anaconda</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'company-backends 'company-anaconda<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'python-mode-hook 'anaconda-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div></li>

<li><a id="orgheadline30"></a>Virtual Environments<br  /><div class="outline-text-5" id="text-orgheadline30">
<p>
Tell <code>virtualenvwrapper</code> where <code>$WORKON_HOME</code> is.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>venv-initialize-interactive-shells<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>getenv <span style="color: #b85c57;">"WORKON_HOME"</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>setq venv-location <span style="color: #CCCCB7;">(</span>getenv <span style="color: #b85c57;">"WORKON_HOME"</span><span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>message <span style="color: #b85c57;">"WORKON_HOME env variable not set."</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
When opening a Python file in a project with directory local variables
set for the project's virtualenv, activate that virtualenv.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #40883f;">;; </span><span style="color: #40883f;">e.g. in .dir-locals.el</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">((python-mode . ((project-venv-name . "myproject-env"))))</span>

<span style="color: #CCCCB7;">(</span>add-hook 'python-mode-hook <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span>
                              <span style="color: #CCCCB7;">(</span>hack-local-variables<span style="color: #CCCCB7;">)</span>
                              <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>boundp 'project-venv-name<span style="color: #CCCCB7;">)</span>
                                <span style="color: #CCCCB7;">(</span>venv-workon project-venv-name<span style="color: #CCCCB7;">))))</span>
</pre>
</div>

<p>
Show active virtualenv in mode line.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default mode-line-format <span style="color: #CCCCB7;">(</span>cons '<span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:exec</span> venv-current-name<span style="color: #CCCCB7;">)</span> mode-line-format<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div></li></ul>
</div>

<div id="outline-container-orgheadline32" class="outline-4">
<h4 id="orgheadline32">YAML</h4>
<div class="outline-text-4" id="text-orgheadline32">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-auto-mode 'yaml-mode <span style="color: #b85c57;">"\\.ya?ml\\'"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33">HTML/CSS (<code>web-mode</code>)</h4>
<div class="outline-text-4" id="text-orgheadline33">
<p>
We use <code>web-mode</code> for working with templates and enable it for the following
filetypes.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.jinja2?\\'"</span> . web-mode<span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.html?\\'"</span> . web-mode<span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.css?\\'"</span> . web-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>setq web-mode-markup-indent-offset 4
      web-mode-css-indent-offset 4
      web-mode-code-indent-offset 4
      web-mode-enable-auto-quoting nil
      web-mode-enable-block-face t
      web-mode-enable-current-element-highlight t<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Use the appropriate <code>web-mode</code> engine when visiting a particular filetype.
At the moment we default to the <code>django</code> engine for <code>.html</code> files.
If you are in a project that uses <code>jinja2</code> for templates, and the file extensions
are in <code>.html</code> (a safe bet), then you'll need to define a <code>.dir-locals.el</code> file
for that project, telling it to use the appropriate engine.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq web-mode-engines-alist
      '<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"jinja2"</span>    . <span style="color: #b85c57;">"\\.jinja2\\'"</span><span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"django"</span>    . <span style="color: #b85c57;">"\\.html\\'"</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-4">
<h4 id="orgheadline34">Markdown</h4>
<div class="outline-text-4" id="text-orgheadline34">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.</span><span style="color: #b85c57; font-weight: bold;">\\</span><span style="color: #b85c57; font-weight: bold;">(</span><span style="color: #b85c57;">md</span><span style="color: #b85c57; font-weight: bold;">\\</span><span style="color: #b85c57; font-weight: bold;">|</span><span style="color: #b85c57;">markdown</span><span style="color: #b85c57; font-weight: bold;">\\</span><span style="color: #b85c57; font-weight: bold;">)</span><span style="color: #b85c57;">\\'"</span> . markdown-mode<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline35" class="outline-4">
<h4 id="orgheadline35">Javascript</h4>
<div class="outline-text-4" id="text-orgheadline35">
<p>
We use <code>js2-mode</code> instead of the built-in <code>js-mode</code>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.js\\'"</span> . js2-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>setq js2-use-font-lock-faces t
      js2-mode-must-byte-compile nil
      js2-basic-offset 2
      js2-indent-on-enter-key t
      js2-auto-indent-p t
      js2-bounce-indent-p nil<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'js2-mode
  <span style="color: #CCCCB7;">(</span>js2-imenu-extras-setup<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>toggle-truncate-lines<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36">Lisp</h4>
<div class="outline-text-4" id="text-orgheadline36">
<p>
Use <code>pp-eval-expression</code>. The same as <code>eval-expression</code>, but pretty-prints output.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-:"</span><span style="color: #CCCCB7;">)</span> 'pp-eval-expression<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Define a list of "lispy" modes, so we can activate/deactivate stuff for all of
them in a loop.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">derived</span><span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">elisp only</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defconst</span> <span style="color: #4fa8a8;">elispy-modes</span>
  '<span style="color: #CCCCB7;">(</span>emacs-lisp-mode ielm-mode<span style="color: #CCCCB7;">))</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">all lisps</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defconst</span> <span style="color: #4fa8a8;">lispy-modes</span>
  <span style="color: #CCCCB7;">(</span>append elispy-modes
          '<span style="color: #CCCCB7;">(</span>lisp-mode inferior-lisp-mode lisp-interaction-mode
            clojure-mode<span style="color: #CCCCB7;">))</span>
  <span style="color: #40883f;">"All lispy major modes."</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-lisp-setup</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Enable features useful in any Lisp mode."</span>
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">(rainbow-delimiters-mode t)</span>
  <span style="color: #40883f;">;; </span><span style="color: #40883f;">(hl-sexp-mode)</span>
  <span style="color: #CCCCB7;">(</span>enable-paredit-mode<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>turn-on-eldoc-mode<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>highlight-parentheses-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>hook <span style="color: #CCCCB7;">(</span>mapcar #'derived-mode-hook-name lispy-modes<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>add-hook hook 'my-lisp-setup<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Check parentheses on save.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">maybe-check-parens</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Run `</span><span style="color: #989848; font-weight: bold;">check-parens</span><span style="color: #40883f;">' if this is a lispy mode."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>memq major-mode lispy-modes<span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>check-parens<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span>add-hook 'after-save-hook 'maybe-check-parens<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Dim parentheses for Lisps.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-paren-face-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37">Clojure</h4>
<div class="outline-text-4" id="text-orgheadline37">
<p>
Hide <code>*nrepl-connection*</code> and <code>*nrepl-server*</code> buffers.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq nrepl-hide-special-buffers t<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Set some variables in CIDER REPL and some hooks.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq cider-repl-use-clojure-font-lock t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'cider-repl-mode-hook 'subword-mode<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'cider-repl-mode-hook 'paredit-mode<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'cider-repl-mode-hook
          <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>setq show-trailing-whitespace nil<span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Show eldoc for Clojure.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'cider-mode-hook 'cider-turn-on-eldoc-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Use clojure-mode for Clojurescript.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-auto-mode 'clojure-mode <span style="color: #b85c57;">"\\.cljs\\'"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline38" class="outline-4">
<h4 id="orgheadline38">Elm</h4>
<div class="outline-text-4" id="text-orgheadline38">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'elm-mode-hook #'elm-oracle-setup-completion<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39">Haskell</h4>
<div class="outline-text-4" id="text-orgheadline39">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'haskell-mode-hook 'haskell-indentation-mode<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>eval-after-load 'flycheck
  '<span style="color: #CCCCB7;">(</span>add-hook 'flycheck-mode-hook #'flycheck-haskell-setup<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline41" class="outline-3">
<h3 id="orgheadline41">Code Folding (HideShow)</h3>
<div class="outline-text-3" id="text-orgheadline41">
<p>
Show the contents of the first 40 characters of the folded text and the number of lines folded.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq hs-set-up-overlay
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-hs-overlay</span> <span style="color: #CCCCB7;">(</span>ov<span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>eq 'code <span style="color: #CCCCB7;">(</span>overlay-get ov 'hs<span style="color: #CCCCB7;">))</span>
          <span style="color: #CCCCB7;">(</span>overlay-put ov 'display
                       <span style="color: #CCCCB7;">(</span>propertize
                        <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">" ... %s &lt;%d&gt; ... "</span>
                                <span style="color: #CCCCB7;">(</span>replace-regexp-in-string
                                 <span style="color: #b85c57;">"\n"</span> <span style="color: #b85c57;">""</span>
                                 <span style="color: #CCCCB7;">(</span>replace-regexp-in-string
                                  <span style="color: #b85c57;">"^[ \t]*"</span> <span style="color: #b85c57;">""</span>
                                  <span style="color: #CCCCB7;">(</span>replace-regexp-in-string
                                   <span style="color: #b85c57;">"[ \t]*$"</span> <span style="color: #b85c57;">""</span>
                                   <span style="color: #CCCCB7;">(</span>buffer-substring <span style="color: #CCCCB7;">(</span>overlay-start ov<span style="color: #CCCCB7;">)</span>
                                                     <span style="color: #CCCCB7;">(</span>+ <span style="color: #CCCCB7;">(</span>overlay-start ov<span style="color: #CCCCB7;">)</span> 40<span style="color: #CCCCB7;">)))))</span>
                                <span style="color: #CCCCB7;">(</span>count-lines <span style="color: #CCCCB7;">(</span>overlay-start ov<span style="color: #CCCCB7;">)</span>
                                             <span style="color: #CCCCB7;">(</span>overlay-end ov<span style="color: #CCCCB7;">)))</span>
                        'face 'diff-removed<span style="color: #CCCCB7;">)))))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline42" class="outline-3">
<h3 id="orgheadline42">Dired</h3>
<div class="outline-text-3" id="text-orgheadline42">
<p>
Don't hide details in dired.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq diredp-hide-details-initially-flag nil<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Define some keybindings for <code>dired</code> for quick navigation.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">bind-dired-utils-keys</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #CCCCB7;">(</span>bind-keys <span style="color: #282828; font-weight: bold;">:map</span> dired-mode-map
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"."</span> . dired-up-directory<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-o"</span> . dired-subtree-insert<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-c"</span> . dired-subtree-remove<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-u"</span> . dired-subtree-up<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-d"</span> . dired-subtree-down<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-p"</span> . dired-subtree-previous-sibling<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-n"</span> . dired-subtree-next-sibling<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-&gt;"</span> . dired-subtree-end<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"M-&lt;"</span> . dired-subtree-beginning<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"C-c d"</span> . dired-filter-by-directory<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"C-c f"</span> . dired-filter-by-file<span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Setup <code>dired+</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'dired
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">dired+</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">dired-subtree</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">dired-filter</span><span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>fboundp 'global-dired-hide-details-mode<span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>global-dired-hide-details-mode -1<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>setq dired-recursive-deletes 'top<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>bind-dired-utils-keys<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>define-key dired-mode-map [mouse-2] 'dired-find-file<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Open <code>dired</code> for the current directory when pressing <code>C-x C-d</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-x C-d"</span><span style="color: #CCCCB7;">)</span> '<span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>dired <span style="color: #b85c57;">"."</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Omit uninteresting files in <code>dired</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-hook 'dired-mode-hook <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>dired-omit-mode<span style="color: #CCCCB7;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43">Org</h3>
<div class="outline-text-3" id="text-orgheadline43">
<p>
Tell Org where our orgfiles are.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-directory <span style="color: #b85c57;">"~/orgfiles"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Set custom TODO keywords.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-todo-keywords
      '<span style="color: #CCCCB7;">((</span>sequence <span style="color: #b85c57;">"TODO"</span> <span style="color: #b85c57;">"DOING"</span> <span style="color: #b85c57;">"WAITING"</span> <span style="color: #b85c57;">"LATER"</span> <span style="color: #b85c57;">"|"</span> <span style="color: #b85c57;">"DONE"</span> <span style="color: #b85c57;">"DELEGATED"</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Default notes file for <code>org-capture</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-default-notes-file <span style="color: #CCCCB7;">(</span>concat org-directory <span style="color: #b85c57;">"/notes.org"</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Set custom <code>org-capture</code> templates.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-capture-templates
      '<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"t"</span> <span style="color: #b85c57;">"Todo"</span> entry <span style="color: #CCCCB7;">(</span>file+headline <span style="color: #CCCCB7;">(</span>concat org-directory <span style="color: #b85c57;">"/todo.org"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"Other"</span><span style="color: #CCCCB7;">)</span>
         <span style="color: #b85c57;">"* TODO %?\n  %i\n  %a"</span><span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"n"</span> <span style="color: #b85c57;">"Note"</span> entry <span style="color: #CCCCB7;">(</span>file+datetree <span style="color: #CCCCB7;">(</span>concat org-directory <span style="color: #b85c57;">"/notes.org"</span><span style="color: #CCCCB7;">))</span>
         <span style="color: #b85c57;">"* %?\nEntered on %U\n  %i\n  %a"</span><span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-c o c"</span><span style="color: #CCCCB7;">)</span> 'org-capture<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Add custom <code>org-agenda</code> command. We'd like to see at a glance:
</p>
<ul class="org-ul">
<li>Our agenda for the week</li>
<li>What we are currently working on</li>
<li>List of remaining TODO items</li>
</ul>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-agenda-custom-commands
      '<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"z"</span> <span style="color: #b85c57;">"Agenda and Tasks"</span>
         <span style="color: #CCCCB7;">((</span>agenda <span style="color: #b85c57;">""</span><span style="color: #CCCCB7;">)</span>
          <span style="color: #CCCCB7;">(</span>todo <span style="color: #b85c57;">"DOING"</span><span style="color: #CCCCB7;">)</span>
          <span style="color: #CCCCB7;">(</span>todo <span style="color: #b85c57;">"TODO"</span><span style="color: #CCCCB7;">)))))</span>
</pre>
</div>

<p>
Enable font-locking for org source blocks.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-src-fontify-natively t<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Don't evaluate source blocks when exporting.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-export-babel-evaluate nil<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline44" class="outline-4">
<h4 id="orgheadline44">Publishing</h4>
<div class="outline-text-4" id="text-orgheadline44">
<p>
Configure publishing of our orgfiles.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-publish-project-alist
      `<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"orgfiles"</span>
         <span style="color: #282828; font-weight: bold;">:base-directory</span> <span style="color: #b85c57;">"~/Dropbox/orgfiles"</span>
         <span style="color: #282828; font-weight: bold;">:publishing-directory</span> <span style="color: #b85c57;">"~/Dropbox/orgfiles/published"</span>
         <span style="color: #282828; font-weight: bold;">:publishing-function</span> org-html-publish-to-html
         <span style="color: #282828; font-weight: bold;">:section-numbers</span> nil
         <span style="color: #282828; font-weight: bold;">:table-of-contents</span> nil
         <span style="color: #282828; font-weight: bold;">:recursive</span> t
         <span style="color: #282828; font-weight: bold;">:auto-sitemap</span> t
         <span style="color: #282828; font-weight: bold;">:sitemap-filename</span> <span style="color: #b85c57;">"sitemap.org"</span>
         <span style="color: #282828; font-weight: bold;">:sitemap-title</span> <span style="color: #b85c57;">"orgfiles"</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline45" class="outline-4">
<h4 id="orgheadline45">Journal</h4>
<div class="outline-text-4" id="text-orgheadline45">
<p>
Experiment with <code>org-journal</code> for a personal diary of sorts.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq org-journal-dir <span style="color: #CCCCB7;">(</span>concat org-directory <span style="color: #b85c57;">"/journal/"</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46">Git</h3>
<div class="outline-text-3" id="text-orgheadline46">
<p>
Show git status indicators in the fringe.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-git-gutter-mode 1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>git-gutter:linum-setup<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq git-gutter:modified-sign <span style="color: #b85c57;">"* "</span>
      git-gutter:added-sign <span style="color: #b85c57;">"+ "</span>
      git-gutter:deleted-sign <span style="color: #b85c57;">"- "</span>
      git-gutter:lighter <span style="color: #b85c57;">" GG"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g M-p"</span><span style="color: #CCCCB7;">)</span> 'git-gutter:previous-hunk<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-g M-n"</span><span style="color: #CCCCB7;">)</span> 'git-gutter:next-hunk<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline47" class="outline-4">
<h4 id="orgheadline47">Magit</h4>
<div class="outline-text-4" id="text-orgheadline47">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #40883f;">;; </span><span style="color: #40883f;">skip warning introduced by 1.4.0</span>
<span style="color: #CCCCB7;">(</span>setq magit-last-seen-setup-instructions <span style="color: #b85c57;">"1.4.0"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq-default
 magit-save-some-buffers nil
 magit-process-popup-time 10
 magit-diff-refine-hunk t
 magit-restore-window-configuration t
 magit-completing-read-function 'magit-ido-completing-read
 magit-revert-buffers nil<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-c m m"</span><span style="color: #CCCCB7;">)</span> 'magit-status<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Make the Magit buffer take the entire frame.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'magit
  <span style="color: #CCCCB7;">(</span>fullframe magit-status magit-mode-quit-window<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline48" class="outline-3">
<h3 id="orgheadline48">Projectile</h3>
<div class="outline-text-3" id="text-orgheadline48">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>projectile-global-mode<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>persp-mode<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq projectile-switch-project-action 'projectile-dired
      projectile-completion-system 'ido
      projectile-enable-caching t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-x p"</span><span style="color: #CCCCB7;">)</span> 'projectile-find-file<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>nameframe-projectile-mode t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>nameframe-perspective-mode t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-P"</span><span style="color: #CCCCB7;">)</span> 'nameframe-switch-frame<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Not actually projectile, but still project management related.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"&lt;f3&gt;"</span><span style="color: #CCCCB7;">)</span> 'project-explorer-toggle<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49">ERC</h3>
<div class="outline-text-3" id="text-orgheadline49">
<p>
Set some default values. We don't want to auto-reconnect since it could flood the channel and get us temporarily banned.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq erc-nick <span style="color: #b85c57;">"john2x"</span>
      erc-server-auto-reconnect nil<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Change <code>header-line</code> face when disconnected.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defface</span> <span style="color: #4fa8a8;">erc-header-line-disconnected</span>
  '<span style="color: #CCCCB7;">((</span>t <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:inherit</span> magit-diff-removed<span style="color: #CCCCB7;">)))</span>
  <span style="color: #40883f;">"Face to use when ERC has been disconnected."</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">erc-update-header-line-show-disconnected</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Use a different face in the header-line when disconnected."</span>
  <span style="color: #CCCCB7;">(</span>erc-with-server-buffer
    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">cond</span> <span style="color: #CCCCB7;">((</span>erc-server-process-alive<span style="color: #CCCCB7;">)</span> 'erc-header-line<span style="color: #CCCCB7;">)</span>
          <span style="color: #CCCCB7;">(</span>t 'erc-header-line-disconnected<span style="color: #CCCCB7;">))))</span>

<span style="color: #CCCCB7;">(</span>setq erc-header-line-face-method 'erc-update-header-line-show-disconnected<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Interactive function to create a frame dedicated to ERC and automatically connect to preset servers.
(We don't join channels automatically as it could take too long.)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-erc-frame</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Switch or create to a frame called 'ERC' and connect to IRC"</span>
  <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>nameframe-with-frame <span style="color: #b85c57;">"ERC"</span>
    <span style="color: #CCCCB7;">(</span>persp-switch <span style="color: #b85c57;">"freenode.net"</span><span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>erc <span style="color: #282828; font-weight: bold;">:server</span> <span style="color: #b85c57;">"irc.freenode.net"</span> <span style="color: #282828; font-weight: bold;">:port</span> <span style="color: #b85c57;">"6667"</span> <span style="color: #282828; font-weight: bold;">:nick</span> <span style="color: #b85c57;">"john2x"</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
When using a VPN, freenode.net (and probably other servers as well) requires us to authenticate with SASL.
Unfortunately, SASL support isn't implemented yet in the default ERC package bundled with Emacs.
</p>

<p>
There's an <code>erc-sasl</code> library<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> but it requires patching the <code>erc-login</code> function so it sends the appropriate
CAP request for SASL. Until <code>erc-sasl</code> gets merged into the main ERC package, we'll have to patch it here.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">erc-sasl</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'erc-sasl-server-regexp-list <span style="color: #b85c57;">"irc\\.freenode\\.net"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">erc-login</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Perform user authentication at the IRC server. (PATCHED)"</span>
  <span style="color: #CCCCB7;">(</span>erc-log <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"login: nick: %s, user: %s %s %s :%s"</span>
           <span style="color: #CCCCB7;">(</span>erc-current-nick<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span>user-login-name<span style="color: #CCCCB7;">)</span>
           <span style="color: #CCCCB7;">(</span>or erc-system-name <span style="color: #CCCCB7;">(</span>system-name<span style="color: #CCCCB7;">))</span>
           erc-session-server
           erc-session-user-full-name<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> erc-session-password
      <span style="color: #CCCCB7;">(</span>erc-server-send <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"PASS %s"</span> erc-session-password<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>message <span style="color: #b85c57;">"Logging in without password"</span><span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>and <span style="color: #CCCCB7;">(</span><span style="color: #989848;">featurep</span> '<span style="color: #989848; font-weight: bold;">erc-sasl</span><span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>erc-sasl-use-sasl-p<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span>erc-server-send <span style="color: #b85c57;">"CAP REQ :sasl"</span><span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>erc-server-send <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"NICK %s"</span> <span style="color: #CCCCB7;">(</span>erc-current-nick<span style="color: #CCCCB7;">)))</span>
  <span style="color: #CCCCB7;">(</span>erc-server-send
   <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"USER %s %s %s :%s"</span>
       <span style="color: #40883f;">;; </span><span style="color: #40883f;">hacked - S.B.</span>
       <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> erc-anonymous-login erc-email-userid <span style="color: #CCCCB7;">(</span>user-login-name<span style="color: #CCCCB7;">))</span>
       <span style="color: #b85c57;">"0"</span> <span style="color: #b85c57;">"*"</span>
       erc-session-user-full-name<span style="color: #CCCCB7;">))</span>
  <span style="color: #CCCCB7;">(</span>erc-update-mode-line<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
<code>.ircauthinfo</code> is where we store our NickServ passwords, so we don't have to type it in all the time
(and it breaks <code>erc-login</code> prompt when SASL is required).
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'auth-sources <span style="color: #b85c57;">"~/.emacs.d/.ircauthinfo"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Set the prompt to use the channel name.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq erc-prompt  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>concat <span style="color: #CCCCB7;">(</span>buffer-name<span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"&gt; "</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>
</div>

<div id="outline-container-orgheadline50" class="outline-4">
<h4 id="orgheadline50">Modules</h4>
<div class="outline-text-4" id="text-orgheadline50">
<p>
Highlight nicknames so they're easier to spot.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">erc-highlight-nicknames</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-to-list 'erc-modules 'highlight-nicknames<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Use the <code>services</code> module to automatically attempt to identify with NickServ when connection to a server.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'erc-modules 'services<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Save logs when leaving a channel.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'erc-modules 'log<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq erc-save-buffer-on-part t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq erc-log-channels-directory <span style="color: #b85c57;">"~/.erc/logs/"</span><span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Render smiley icons, because why not <code>:-)</code>?
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'erc-modules 'smiley<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>erc-update-modules<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline51" class="outline-3">
<h3 id="orgheadline51">Mail</h3>
<div class="outline-text-3" id="text-orgheadline51">
<p>
<code>mu4e</code> is a mail client for Emacs. It works in conjunction with <code>offlineimap</code>
to provide a nice interface to read and send mail. Note that <code>mu4e</code> is installed
via OS package manager (i.e. Homebrew).
</p>

<p>
Set some default variables.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">mu4e</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">smtpmail</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">starttls</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq mu4e-update-interval 150<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq user-mail-address <span style="color: #b85c57;">"john2x@gmail.com"</span>
      user-full-name  <span style="color: #b85c57;">"John Del Rosario"</span>
      mu4e-compose-signature <span style="color: #b85c57;">"john2x.com\nSent from GNU Emacs"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq mu4e-maildir <span style="color: #b85c57;">"~/mail"</span>
      mu4e-sent-folder <span style="color: #b85c57;">"/personal/[Gmail]/Sent Mail"</span>
      mu4e-drafts-folder <span style="color: #b85c57;">"/personal/drafts"</span>
      mu4e-trash-folder <span style="color: #b85c57;">"/personal/[Gmail]/Trash"</span>
      mu4e-refile-folder <span style="color: #b85c57;">"/personal/archive"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq mu4e-headers-skip-duplicates t<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">don't save message to Sent Messages, Gmail/IMAP takes care of this</span>
<span style="color: #CCCCB7;">(</span>setq mu4e-sent-messages-behavior 'delete<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">set mu4e as the default mail program</span>
<span style="color: #CCCCB7;">(</span>setq mail-user-agent 'mu4e-user-agent<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">kill compose buffer instead of just hiding it</span>
<span style="color: #CCCCB7;">(</span>setq message-kill-buffer-on-exit t<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>setq mu4e-view-show-addresses t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq mu4e-attachment-dir <span style="color: #b85c57;">"~/Downloads/Attachments/"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">disable trailing whitespace when in mu4e</span>
<span style="color: #CCCCB7;">(</span>add-hook 'mu4e-headers-mode-hook <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>setq-local show-trailing-whitespace nil<span style="color: #CCCCB7;">)))</span>
<span style="color: #CCCCB7;">(</span>add-hook 'mu4e-view-mode-hook <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span> <span style="color: #CCCCB7;">(</span>setq-local show-trailing-whitespace nil<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span>setq message-send-mail-function 'smtpmail-send-it
      smtpmail-stream-type 'starttls
      smtpmail-default-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span>
      smtpmail-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span>
      smtpmail-smtp-user <span style="color: #b85c57;">"john2x@gmail.com"</span>
      smtpmail-smtp-service 587
      starttls-extra-arguments '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"--x509cafile"</span> <span style="color: #b85c57;">"/usr/local/etc/openssl/cert.pem"</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Define multiple email accounts so we can switch between them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq mu4e-user-mail-address-list '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"john2x@gmail.com"</span>
                                    <span style="color: #b85c57;">"john@collabspot.com"</span>
                                    <span style="color: #b85c57;">"john@prospecthive.com"</span><span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defvar</span> <span style="color: #4fa8a8;">my-mu4e-account-alist</span>
  '<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"personal"</span>
     <span style="color: #CCCCB7;">(</span>mu4e-sent-folder <span style="color: #b85c57;">"/personal/[Gmail]/Sent Mail"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-drafts-folder <span style="color: #b85c57;">"/personal/drafts"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-compose-signature <span style="color: #b85c57;">"john2x.com\nSent from GNU Emacs"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>user-mail-address <span style="color: #b85c57;">"john2x@gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-user <span style="color: #b85c57;">"john2x@gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-default-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-stream-type starttls<span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-service 587<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"collabspot"</span>
     <span style="color: #CCCCB7;">(</span>mu4e-sent-folder <span style="color: #b85c57;">"/collabspot/[Gmail]/Sent Mail"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-drafts-folder <span style="color: #b85c57;">"/collabspot/drafts"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-compose-signature <span style="color: #b85c57;">"collabspot.com\nSent from GNU Emacs"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>user-mail-address <span style="color: #b85c57;">"john@collabspot.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-user <span style="color: #b85c57;">"john@collabspot.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-default-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-stream-type starttls<span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-service 587<span style="color: #CCCCB7;">))</span>
    <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"prospecthive"</span>
     <span style="color: #CCCCB7;">(</span>mu4e-sent-folder <span style="color: #b85c57;">"/prospecthive/[Gmail]/Sent Mail"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-drafts-folder <span style="color: #b85c57;">"/prospecthive/drafts"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>mu4e-compose-signature <span style="color: #b85c57;">"prospecthive.com\nSent from GNU Emacs"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>user-mail-address <span style="color: #b85c57;">"john@prospecthive.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-user <span style="color: #b85c57;">"john@prospecthive.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-default-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-server <span style="color: #b85c57;">"smtp.gmail.com"</span><span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-stream-type starttls<span style="color: #CCCCB7;">)</span>
     <span style="color: #CCCCB7;">(</span>smtpmail-smtp-service 587<span style="color: #CCCCB7;">))))</span>
</pre>
</div>

<p>
Function to select an account when composing an email.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-mu4e-set-account</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Set the account for composing a message."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let*</span> <span style="color: #CCCCB7;">((</span>account
          <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> mu4e-compose-parent-message
              <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">((</span>maildir <span style="color: #CCCCB7;">(</span>mu4e-message-field mu4e-compose-parent-message <span style="color: #282828; font-weight: bold;">:maildir</span><span style="color: #CCCCB7;">)))</span>
                <span style="color: #CCCCB7;">(</span>string-match <span style="color: #b85c57;">"/</span><span style="color: #b85c57; font-weight: bold;">\\</span><span style="color: #b85c57; font-weight: bold;">(</span><span style="color: #b85c57;">.*?</span><span style="color: #b85c57; font-weight: bold;">\\</span><span style="color: #b85c57; font-weight: bold;">)</span><span style="color: #b85c57;">/"</span> maildir<span style="color: #CCCCB7;">)</span>
                <span style="color: #CCCCB7;">(</span>match-string 1 maildir<span style="color: #CCCCB7;">))</span>
            <span style="color: #CCCCB7;">(</span>completing-read <span style="color: #CCCCB7;">(</span>format <span style="color: #b85c57;">"Compose with account: (%s) "</span>
                                     <span style="color: #CCCCB7;">(</span>mapconcat #'<span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">(</span>var<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>car var<span style="color: #CCCCB7;">))</span>
                                                my-mu4e-account-alist <span style="color: #b85c57;">"/"</span><span style="color: #CCCCB7;">))</span>
                             <span style="color: #CCCCB7;">(</span>mapcar #'<span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">(</span>var<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>car var<span style="color: #CCCCB7;">))</span> my-mu4e-account-alist<span style="color: #CCCCB7;">)</span>
                             nil t nil nil <span style="color: #CCCCB7;">(</span>caar my-mu4e-account-alist<span style="color: #CCCCB7;">))))</span>
         <span style="color: #CCCCB7;">(</span>account-vars <span style="color: #CCCCB7;">(</span>cdr <span style="color: #CCCCB7;">(</span>assoc account my-mu4e-account-alist<span style="color: #CCCCB7;">))))</span>
    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> account-vars
        <span style="color: #CCCCB7;">(</span>mapc #'<span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">(</span>var<span style="color: #CCCCB7;">)</span>
                  <span style="color: #CCCCB7;">(</span>set <span style="color: #CCCCB7;">(</span>car var<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>cadr var<span style="color: #CCCCB7;">)))</span>
              account-vars<span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #b85c57; font-weight: bold;">error</span> <span style="color: #b85c57;">"No email account found"</span><span style="color: #CCCCB7;">))))</span>

<span style="color: #CCCCB7;">(</span>add-hook 'mu4e-compose-pre-hook 'my-mu4e-set-account<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>add-hook 'message-send-hook
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">()</span>
    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">unless</span> <span style="color: #CCCCB7;">(</span>yes-or-no-p <span style="color: #b85c57;">"Are you sure you want to send this?"</span><span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #b85c57; font-weight: bold;">signal</span> 'quit nil<span style="color: #CCCCB7;">))))</span>
</pre>
</div>

<p>
Define some shortcuts to common folders.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq mu4e-maildir-shortcuts
    '<span style="color: #CCCCB7;">((</span><span style="color: #b85c57;">"/personal/INBOX"</span>               . ?j<span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"/collabspot/INBOX"</span>             . ?c<span style="color: #CCCCB7;">)</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"/prospecthive/INBOX"</span>           . ?p<span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Define bookmarks.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-bookmarks
  '<span style="color: #CCCCB7;">((</span>concat <span style="color: #b85c57;">"maildir:/personal/[Gmail]/\"Sent Mail\" AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/prospecthive/[Gmail]/\"Sent Mail\" AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/collabspot/[Gmail]/\"Sent Mail\" AND date:3d..now"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"Recent sent mail"</span> ?s<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-bookmarks
  '<span style="color: #CCCCB7;">((</span>concat <span style="color: #b85c57;">"maildir:/personal/[Gmail]/\"All Mail\" AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/prospecthive/[Gmail]/\"All Mail\" AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/collabspot/[Gmail]/\"All Mail\" AND date:3d..now"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"Recent all mail"</span> ?a<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-bookmarks
  '<span style="color: #CCCCB7;">((</span>concat <span style="color: #b85c57;">"maildir:/personal/INBOX AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/prospecthive/INBOX AND date:3d..now"</span>
            <span style="color: #b85c57;">" OR maildir:/collabspot/INBOX AND date:3d..now"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"Recent inbox"</span> ?3<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-bookmarks
  '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"flag:flagged"</span> <span style="color: #b85c57;">"Flagged"</span> ?f<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-bookmarks
  '<span style="color: #CCCCB7;">((</span>concat <span style="color: #b85c57;">"maildir:/personal/INBOX AND date:today..now"</span>
            <span style="color: #b85c57;">" OR maildir:/prospecthive/INBOX AND date:today..now"</span>
            <span style="color: #b85c57;">" OR maildir:/collabspot/INBOX AND date:today..now"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"Today's inbox"</span> ?i<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Define custom headers.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>add-to-list 'mu4e-header-info-custom
  '<span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:important</span> . <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:name</span> <span style="color: #b85c57;">"Important"</span>
                  <span style="color: #282828; font-weight: bold;">:shortname</span> <span style="color: #b85c57;">"Impt"</span>
                  <span style="color: #282828; font-weight: bold;">:help</span> <span style="color: #b85c57;">"Tagged as important by Gmail"</span>
                  <span style="color: #282828; font-weight: bold;">:function</span>
                  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">(</span>msg<span style="color: #CCCCB7;">)</span>
                    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">if</span> <span style="color: #CCCCB7;">(</span>member <span style="color: #b85c57;">"\\Important"</span> <span style="color: #CCCCB7;">(</span>mu4e-message-field msg <span style="color: #282828; font-weight: bold;">:tags</span><span style="color: #CCCCB7;">))</span>
                        <span style="color: #b85c57;">"*"</span>
                      <span style="color: #b85c57;">" "</span><span style="color: #CCCCB7;">)))))</span>

<span style="color: #CCCCB7;">(</span>add-to-list
 'mu4e-header-info-custom
 '<span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:account</span> . <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:name</span> <span style="color: #b85c57;">"Account"</span>
               <span style="color: #282828; font-weight: bold;">:shortname</span> <span style="color: #b85c57;">"Acct"</span>
               <span style="color: #282828; font-weight: bold;">:help</span> <span style="color: #b85c57;">"Account name"</span>
               <span style="color: #282828; font-weight: bold;">:function</span>
               <span style="color: #CCCCB7;">(</span><span style="color: #989848;">lambda</span> <span style="color: #CCCCB7;">(</span>msg<span style="color: #CCCCB7;">)</span>
                 <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">((</span>maildir <span style="color: #CCCCB7;">(</span>mu4e-message-field msg <span style="color: #282828; font-weight: bold;">:maildir</span><span style="color: #CCCCB7;">)))</span>
                   <span style="color: #CCCCB7;">(</span><span style="color: #989848;">cl-flet</span> <span style="color: #CCCCB7;">((</span>starts-with <span style="color: #CCCCB7;">(</span>s begins<span style="color: #CCCCB7;">)</span>
                                          <span style="color: #CCCCB7;">(</span><span style="color: #989848;">cond</span> <span style="color: #CCCCB7;">((</span>&gt;= <span style="color: #CCCCB7;">(</span>length s<span style="color: #CCCCB7;">)</span> <span style="color: #CCCCB7;">(</span>length begins<span style="color: #CCCCB7;">))</span>
                                             <span style="color: #CCCCB7;">(</span>string-equal <span style="color: #CCCCB7;">(</span>substring s 0 <span style="color: #CCCCB7;">(</span>length begins<span style="color: #CCCCB7;">))</span>
                                                           begins<span style="color: #CCCCB7;">))</span>
                                                <span style="color: #CCCCB7;">(</span>t nil<span style="color: #CCCCB7;">))))</span>
                     <span style="color: #CCCCB7;">(</span><span style="color: #989848;">cond</span> <span style="color: #CCCCB7;">((</span>starts-with maildir <span style="color: #b85c57;">"/collabspot"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"collabspot"</span><span style="color: #CCCCB7;">)</span>
                           <span style="color: #CCCCB7;">((</span>starts-with maildir <span style="color: #b85c57;">"/prospecthive"</span><span style="color: #CCCCB7;">)</span> <span style="color: #b85c57;">"prospecthive"</span><span style="color: #CCCCB7;">)</span>
                           <span style="color: #CCCCB7;">(</span>t <span style="color: #b85c57;">"personal"</span><span style="color: #CCCCB7;">))))))))</span>

<span style="color: #CCCCB7;">(</span>setq mu4e-headers-fields '<span style="color: #CCCCB7;">((</span><span style="color: #282828; font-weight: bold;">:human-date</span> . 12<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:account</span> . 10<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:flags</span> . 6<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:important</span> . 4<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:mailing-list</span> . 10<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:from-or-to</span> . 22<span style="color: #CCCCB7;">)</span>
                            <span style="color: #CCCCB7;">(</span><span style="color: #282828; font-weight: bold;">:subject</span><span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Improve rendering of HTML only emails.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">mu4e-contrib</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq mu4e-html2text-command 'mu4e-shr2text<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Enable org-mode support when writing emails, so we can send pretty HTML emails.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">org-mu4e</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq org-mu4e-convert-to-html t<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">when composing an email, switch on the special mu4e/orgmode mode</span>
<span style="color: #CCCCB7;">(</span>define-key mu4e-compose-mode-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-c o"</span><span style="color: #CCCCB7;">)</span> 'org~mu4e-mime-switch-headers-or-body<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Use dired to select and attach files. To attach a file to a message, press <code>C-x C-d</code> when
composing a message (this opens dired) then navigate to the file you want to attach. Then
press <code>C-c RET C-a y</code> to attach the highlighted file. You can also mark multiple files
to attach them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">gnus-dired</span><span style="color: #CCCCB7;">)</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">make the `</span><span style="color: #989848; font-weight: bold;">gnus-dired-mail-buffers</span><span style="color: #40883f;">' function also work on</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">message-mode derived modes, such as mu4e-compose-mode</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">gnus-dired-mail-buffers</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Return a list of active message buffers."</span>
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">let</span> <span style="color: #CCCCB7;">(</span>buffers<span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span><span style="color: #989848;">save-current-buffer</span>
      <span style="color: #CCCCB7;">(</span><span style="color: #989848;">dolist</span> <span style="color: #CCCCB7;">(</span>buffer <span style="color: #CCCCB7;">(</span>buffer-list t<span style="color: #CCCCB7;">))</span>
        <span style="color: #CCCCB7;">(</span>set-buffer buffer<span style="color: #CCCCB7;">)</span>
        <span style="color: #CCCCB7;">(</span><span style="color: #989848;">when</span> <span style="color: #CCCCB7;">(</span>and <span style="color: #CCCCB7;">(</span>derived-mode-p 'message-mode<span style="color: #CCCCB7;">)</span>
                <span style="color: #CCCCB7;">(</span>null message-sent-message-via<span style="color: #CCCCB7;">))</span>
          <span style="color: #CCCCB7;">(</span>push <span style="color: #CCCCB7;">(</span>buffer-name buffer<span style="color: #CCCCB7;">)</span> buffers<span style="color: #CCCCB7;">))))</span>
    <span style="color: #CCCCB7;">(</span>nreverse buffers<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span>setq gnus-dired-mail-mode 'mu4e-user-agent<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>add-hook 'dired-mode-hook 'turn-on-gnus-dired-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Interactive function to switch to a frame dedicated for mu4e.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-mu4e-frame</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Switch or create to a frame called 'mu4e' and connect to IRC"</span>
  <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>nameframe-with-frame <span style="color: #b85c57;">"mu4e"</span>
    <span style="color: #CCCCB7;">(</span>persp-switch <span style="color: #b85c57;">"mu4e"</span><span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>mu4e<span style="color: #CCCCB7;">)))</span>
</pre>
</div>

<p>
Show unread emails in mode-line (via <code>mu4e-alert</code> package).
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">mu4e-alert</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>setq mu4e-alert-interesting-mail-query
      <span style="color: #CCCCB7;">(</span>concat <span style="color: #b85c57;">"(maildir:/personal/INBOX AND date:today..now"</span>
              <span style="color: #b85c57;">" OR maildir:/prospecthive/INBOX AND date:today..now"</span>
              <span style="color: #b85c57;">" OR maildir:/collabspot/INBOX AND date:today..now)"</span>
              <span style="color: #b85c57;">" AND flag:unread"</span><span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span>add-hook 'after-init-hook #'mu4e-alert-enable-mode-line-display<span style="color: #CCCCB7;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline52" class="outline-3">
<h3 id="orgheadline52">Ledger</h3>
<div class="outline-text-3" id="text-orgheadline52">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">defconst</span> <span style="color: #4fa8a8;">*ledger-journal-path*</span> <span style="color: #b85c57;">"~/Dropbox/ledger/john.ledger"</span><span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span>add-to-list 'auto-mode-alist '<span style="color: #CCCCB7;">(</span><span style="color: #b85c57;">"\\.ledger$"</span> . ledger-mode<span style="color: #CCCCB7;">))</span>

<span style="color: #CCCCB7;">(</span>add-hook 'ledger-mode-hook 'goto-address-prog-mode<span style="color: #CCCCB7;">)</span>

<span style="color: #40883f;">;; </span><span style="color: #40883f;">don't override the highlighting of each posted item</span>
<span style="color: #40883f;">;; </span><span style="color: #40883f;">in a xact if it is cleared/pending</span>
<span style="color: #CCCCB7;">(</span>setq ledger-fontify-xact-state-overrides nil<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-ledger-frame</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #40883f;">"Easy way to open my ledger journal"</span>
  <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>nameframe-with-frame <span style="color: #b85c57;">"ledger"</span>
    <span style="color: #CCCCB7;">(</span>persp-switch <span style="color: #b85c57;">"ledger"</span><span style="color: #CCCCB7;">)</span>
    <span style="color: #CCCCB7;">(</span>find-file *ledger-journal-path*<span style="color: #CCCCB7;">)))</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'flycheck
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">flycheck-ledger</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline53" class="outline-3">
<h3 id="orgheadline53">Evil</h3>
<div class="outline-text-3" id="text-orgheadline53">
<p>
Evil is <a href="https://bitbucket.org/lyro/evil/issues/544/disparity-between-local-and-global-mode">meant to be enabled globally</a>.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>evil-mode 1<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
But we only want Normal state for particular modes, and use Emacs state everywhere else.
</p>

<p>
So first, we set Emacs state as Evil's default state.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default evil-default-state 'emacs<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
We then clear Evil's whitelists of modes that should start in a particular state,
so they all start in Emacs state.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default evil-insert-state-modes '<span style="color: #CCCCB7;">())</span>
</pre>
</div>

<p>
Then we specify which modes we want Normal state for.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>setq-default evil-normal-state-modes
  '<span style="color: #CCCCB7;">(</span>clojure-mode
    python-mode
    ruby-mode
    erlang-mode
    emacs-lisp-mode
    web-mode
    css-mode
    js2-mode
    js-mode
    json-mode
    html-mode
    ledger-mode
    yaml-mode
    elixir-mode
    org-mode
    sh-mode
    haskell-mode
    elm-mode
    purescript-mode
    markdown-mode<span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Set the <code>evil-leader</code>.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">evil-leader</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>evil-leader/set-leader <span style="color: #b85c57;">","</span><span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-evil-leader-mode<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Enable Evil plugins.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-evil-surround-mode 1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-evil-matchit-mode 1<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>global-evil-search-highlight-persist t<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>evilnc-default-hotkeys<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'evil
  <span style="color: #CCCCB7;">(</span><span style="color: #989848;">require</span> '<span style="color: #989848; font-weight: bold;">evil-anzu</span><span style="color: #CCCCB7;">))</span>
</pre>
</div>

<p>
Use <code>SPACE</code> for scrolling.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>define-key evil-normal-state-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"SPC"</span><span style="color: #CCCCB7;">)</span> 'evil-scroll-down<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>define-key evil-normal-state-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"S-SPC"</span><span style="color: #CCCCB7;">)</span> 'evil-scroll-up<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
Bind some keys on the leader.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>evil-leader/set-key <span style="color: #b85c57;">"n"</span> 'evil-search-highlight-persist-remove-all<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>evil-leader/set-key <span style="color: #b85c57;">"w"</span> 'evil-write<span style="color: #CCCCB7;">)</span>

<span style="color: #CCCCB7;">(</span><span style="color: #989848;">defun</span> <span style="color: #282828; font-weight: bold;">my-evil-reload-buffer</span> <span style="color: #CCCCB7;">()</span>
  <span style="color: #CCCCB7;">(</span>interactive<span style="color: #CCCCB7;">)</span>
  <span style="color: #CCCCB7;">(</span>evil-edit nil t<span style="color: #CCCCB7;">))</span>
<span style="color: #CCCCB7;">(</span>evil-leader/set-key <span style="color: #b85c57;">"e"</span> 'my-evil-reload-buffer<span style="color: #CCCCB7;">)</span>
</pre>
</div>

<p>
By default, <code>C-u</code> is bound to Emacs' <code>universal-argument</code> function, a rather important function used by various commands.
But in Vim, <code>C-u</code> is supposed to scroll up half a page, and that has been burned into muscle memory by now.
As a compromise, we bind <code>universal-argument</code> to <code>M-u</code> (which previously performs <code>upcase-word</code>, something we rarely, if ever, use),
and use Vim's version of <code>C-u</code> to scroll up half a page.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #CCCCB7;">(</span>global-set-key <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-u"</span><span style="color: #CCCCB7;">)</span> 'universal-argument<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span>define-key universal-argument-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"M-u"</span><span style="color: #CCCCB7;">)</span> 'universal-argument-more<span style="color: #CCCCB7;">)</span>
<span style="color: #CCCCB7;">(</span><span style="color: #989848;">with-eval-after-load</span> 'evil-maps
  <span style="color: #CCCCB7;">(</span>define-key evil-motion-state-map <span style="color: #CCCCB7;">(</span>kbd <span style="color: #b85c57;">"C-u"</span><span style="color: #CCCCB7;">)</span> 'evil-scroll-up<span style="color: #CCCCB7;">))</span>
</pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Copied from <a href="http://doc.rix.si/org/fsem.html">http://doc.rix.si/org/fsem.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/joseph-gay/erc-sasl">https://github.com/joseph-gay/erc-sasl</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: John Del Rosario</p>
<p class="date">Created: 2015-12-02 Wed 13:36</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
